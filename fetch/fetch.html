<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <!-- <button id="fetchPosts"> Fetch posts </button>
    <button id="cancelFetch"> Cancel fetch </button>
    <div id="message"></div> -->
    <script>

        async function fetchAllApi (){
            const [postsResponse, usersResponse] = await Promise.all(
                [
                    fetch('https://jsonplaceholder.typicode.com/users'),
                    fetch('https://jsonplaceholder.typicode.com/posts')
                ]
            );
            const posts =  await postsResponse.json();
            const users = await usersResponse.json();
            return [posts, users];
        }

        fetchAllApi().then(([post, users]) => {
            console.log("post", res);
        })

        // let controller = null;
        // const btnFetch = document.querySelector('#fetchPosts');
        // const cancelFetch = document.querySelector('#cancelFetch');

        // btnFetch.addEventListener('click', async ()=> {
        //     controller = new AbortController();
        //     console.log("controller", controller);
        //     try {
        //         const response = await fetch('https://jsonplaceholder.typicode.com/posts');
        //         console.log("response", response);
        //         const posts = await response.json();
        //         log(`Fetched posts: ${JSON.stringify(posts)}`);
           
        //     } catch (error) {
        //        log("Error fetch", error);
        //     }
        //     controller = null;
        // })

        // cancelFetch.addEventListener("click", () => {
        //     if (controller) {
        //         controller.abort();
        //     }
        // });

        // function log(message) {
        //     document.getElementById("message").innerText = message;
        // }

      // Fetch APi , Wednesday is exercise
      // fetch list data user

      //   function fetchListPost() {
      //     return fetch("https://jsonplaceholder.typicode.com/posts")
      //       .then((response) => response.json())
      //       .catch((error) => new Error("Fetch data error"));
      //   }

      //   function fetchUserById() {
      //     return fetch(`https://jsonplaceholder.typicode.com/users/1`)
      //       .then((response) => response.json())
      //       .catch((error) => new Error("Fetch data error"));
      //   }

      //   fetchListPost().then((res) => {
      //     let listPost = res;

      //     fetchUserById()
      //       .then((res2) => res2)
      //       .then(function (result2) {
      //         let listPostById = listPost.filter(
      //           (item) => item.userId === result2.id
      //         );
      //         console.log("listPostById", listPostById);
      //       });
      //   });

      // type two

      // async function fetchPostJSON (){
      //     const response = await fetch("https://jsonplaceholder.typicode.com/posts");
      //     const posts = response.json();
      //     return posts;
      // }

      // fetchPostJSON().then((post) => {
      //     console.log("post", post)
      // })

      // handle fetch errors

    //   async function fetchMoviesBadStatus() {
    //     const response = await fetch("https://jsonplaceholder.typicode.com/posts");
    //     if (!response.ok) {
    //       const message = `An error has occured: ${response.status}`;
    //       throw new Error(message);
    //     }
    //     const movies = await response.json();
    //     return movies;
    //   }
    //   fetchMoviesBadStatus()
    //   .then((posts) => {
    //     console.log("posts", posts)
    //   })
    //   .catch((error) => {
    //     error.message; // 'An error has occurred: 404'
    //   });
    </script>
  </body>
</html>
